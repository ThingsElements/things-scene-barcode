!function t(e,i,r){function a(o,s){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!s&&h)return h(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return a(i?i:t)},c,c.exports,t,e,i,r)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){switch(t){case"code128":return 2;case"ean13":return 1.35;case"interleaved2of5":return 1;case"code93":return 1.5;case"upce":return 1.3;default:return 1}}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=t("./bitmap"),c=r(l),u=scene,d=u.Component,f=u.RectPath,p=["symbol","text","scale_h","scale_w","rot","showText","height"];symdesc.code39.opts="includetext textxalign=center textgaps=2",symdesc.interleaved2of5.opts="includetext textxalign=center textgaps=1.5",symdesc.code93.opts="includetext textxalign=center textgaps=2",symdesc.ean13.opts="includetext",symdesc.ean8.opts="includetext";var g=function(t){function e(){return a(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),h(e,[{key:"_draw",value:function(t){var e=this.model,i=e.left,r=void 0===i?0:i,a=e.top,n=void 0===a?0:a,o=e.width,s=void 0===o?0:o,h=e.height,l=void 0===h?10:h,c=e.alpha,u=void 0===c?1:c,d=this.text;this.prepareIf(d&&(!this.image||this.lastText!=d)),this.lastText=d,t.beginPath(),t.globalAlpha=u;try{this.image&&t.drawImage(this.image,r,n,s,l)}catch(f){console.log(f)}}},{key:"prepare",value:function(t,e){var i=this.text;if(!i)return void t(this);this.image=new Image;{var r=this,a=this.image,n=this.model,o=(n.showText,n.scale_h),s=void 0===o?3:o,h=n.scale_w,l=void 0===h?5:h,c=n.square,u=void 0===c?!1:c;n.symbol}this.image.onload=function(){r.width_per_scale=a.width/l,u?(r.height_per_scale=a.height/s,r.set({width:a.width,height:a.height})):r.set("width",a.width),t(this)},this.image.onerror=function(t){e(t)};try{this.image.src=this.imageUrl()}catch(d){console.log(d)}}},{key:"onchange",value:function(t){var e=this;p.every(function(i){return t.hasOwnProperty(i)?(delete e.image,!1):!0})}},{key:"adjustResize",value:function(t,e){if(!this.width_per_scale)return e;var i=!!this.get("square"),r=e.left,a=e.width,n=i?e.top:t.top,o=i?e.height:t.height,s=this.get("scale_w"),h=Math.max(Math.round(t.width/this.width_per_scale),1);if((this._last_width&&this._last_width>=t.width&&h>s||this._last_width<=t.width&&s>h)&&(h=s),this._last_width=t.width,i){var l=this.get("scale_h"),c=Math.max(Math.round(t.height/this.height_per_scale),1),u=Math.abs(e.width-t.width)>Math.abs(e.height-t.height)?h:c;Math.abs(t.top-n)>=10&&(n-=u*this.height_per_scale-e.height),Math.abs(t.left-r)>=10&&(r-=u*this.width_per_scale-e.width),a+=u*this.width_per_scale-e.width,o+=u*this.height_per_scale-e.height,(s!==u||l!==u)&&(this.set({scale_w:u,scale_h:u}),delete this.image)}else Math.abs(t.left-r)>=10&&(r-=h*this.width_per_scale-e.width),a+=h*this.width_per_scale-e.width,s!==h&&(this.set("scale_w",h),delete this.image);return{left:r,top:n,width:a,height:o}}},{key:"drawText",value:function(){}},{key:"imageUrl",value:function(){for(var t=this.model,i=t.symbol,r=t.showText,a=t.scale_w,n=this.text,o=r?"":" ",h=.5,l=symdesc[i].opts,u=l.split(" "),d={},f=0;f<u.length;f++)if(u[f]){var p=u[f].indexOf("=");-1==p?d[u[f]]=!0:d[u[f].substr(0,p)]=u[f].substr(p+1)}o&&(d.alttext=o,d.includetext=!0),d.textsize=6+a/2,this.model.square||(d.height=Math.round((this.model.height-8*a)/254*10)/10);var g=new BWIPJS(Module,0);d.backgroundcolor?(g.bitmap(new c["default"](d.backgroundcolor)),delete d.backgroundcolor):g.bitmap(new c["default"]);var w=s(i);g.scale(a*w,a*w),g.bitmap().pad(+d.paddingwidth*a||0,+d.paddingheight*h||0),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.display="none",e.canvas.height=1,e.canvas.width=1,document.body.appendChild(e.canvas));try{BWIPP()(g,i,n,d)}catch(v){console.error(v);var _=g.bitmap();return _.error(e.canvas,"N")}return g.bitmap().show(e.canvas,"N")}},{key:"controls",get:function(){}}]),e}(f(d));i["default"]=g,d.register("barcode",g),scene.Barcode=g},{"./bitmap":2}],2:[function(t,e,i){"use strict";function r(t){var e=[0,0,0],i=[],r=0,a=0,n=0,o=0,s=0,h=0;this.pad=function(t,e){s=t,h=e},this.color=function(t,i,r){e=[t,i,r]},this.extent=function(t,e,i,s){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),s=Math.floor(s),r>t&&(r=t),a>e&&(a=e),i>n&&(n=i),s>o&&(o=s)},this.set=function(t,s,h){t=Math.floor(t),s=Math.floor(s),i.push([t,s,e,h]),r>t&&(r=t),a>s&&(a=s),t>n&&(n=t),s>o&&(o=s)},this.error=function(t){t.width=64,t.height=64;var e=t.getContext("2d");return e.beginPath(),e.rect(0,0,t.width,t.height),e.moveTo(0,0),e.lineTo(t.width,t.height),e.moveTo(t.width,0),e.lineTo(0,t.height),e.lineWidth=5,e.strokeStyle="#ff0000",e.stroke(),t.toDataURL()},this.show=function(e,l){var c=e instanceof window.HTMLCanvasElement?e:document.getElementById(e);if(0==i.length)return c.width=32,c.height=32,c.getContext("2d").clearRect(0,0,c.width,c.height),void(c.style.visibility="visible");if("R"==l||"L"==l)var u=n-r+1,d=o-a+1;else var d=n-r+1,u=o-a+1;if(c.width=d+2*s,c.height=u+2*h,t&&8==t.length){var f=parseInt(t.substr(0,2),16)/255,p=parseInt(t.substr(2,2),16)/255,g=parseInt(t.substr(4,2),16)/255,w=parseInt(t.substr(6,2),16)/255,v=Math.floor((1-f)*(1-w)*255),_=Math.floor((1-p)*(1-w)*255),m=Math.floor((1-g)*(1-w)*255);t="rgb("+v+","+_+","+m+")"}else t&&(t="#"+t);var b=c.getContext("2d");b.fillStyle=t||"#fff",b.fillRect(0,0,c.width,c.height),b.fillStyle="#000";for(var y=b.getImageData(0,0,c.width,c.height),x=y.data,M=0;M<i.length;M++){var O=i[M][0]-r,g=i[M][1]-a,f=i[M][2],P=i[M][3]/255;if("N"==l)g=u-g-1;else if("I"==l)O=d-O-1;else if(g=d-g,"L"==l){var T=g;g=u-O-1,O=T-1}else{var T=O;O=d-g,g=T}var k=4*(g*y.width+O);x[k+0]=x[k+0]*(1-P)+f[0]*P|0,x[k+1]=x[k+1]*(1-P)+f[1]*P|0,x[k+2]=x[k+2]*(1-P)+f[2]*P|0,x[k+3]=255}return b.putImageData(y,s,h),c.toDataURL()}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{}],3:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var a=t("./barcode");Object.defineProperty(i,"Barcode",{enumerable:!0,get:function(){return r(a)["default"]}})},{"./barcode":1}]},{},[3]);