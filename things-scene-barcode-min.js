!function t(e,i,r){function o(n,h){if(!i[n]){if(!e[n]){var s="function"==typeof require&&require;if(!h&&s)return s(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return o(i?i:t)},c,c.exports,t,e,i,r)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}({1:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=t("./bitmap"),l=r(s),c=scene,d=c.Component,u=c.RectPath,f=["symbol","text","scale_h","scale_w","rot","showText"],p={code11:/^[0-9\-]*$/,codebar:/^[A-D][0-9\+$:\-\/.]*[A-D]$/,code39:{normal:/^[0-9A-Z\-.$\/\+%\*\s]*$/,extended:/^[\000-\177]*$/},code93:{normal:/^[0-9A-Z\-.$\/\+%\*\s]*$/,extended:/^[\000-\177]*$/},code128:{auto:/^[\000-\177]*$/,A:/^[\000-\137]*$/,B:/^[\040-\177]*$/,C:/^(([0-9]{2})+?)*$/},datamatrix:/^[\x00-\xff]*$/,ean8:/^\d{1,}$/,ean13:/^\d{1,}$/,industrial2of5:/^\d{1,}$/,interleaved2of5:/^\d{1,}$/,isbn:/((978[\--– ])?[0-9][0-9\--– ]{10}[\--– ][0-9xX])|((978)?[0-9]{9}[0-9Xx])/,msi:/^\d{1,}$/,pdf417:{"text-compaction":/^[\011\012\015\040-\177]*$/,"binary-compaction":/^[\x00-\xff]*$/},planet:/^\d{1,}$/,postnet:/^\d{1,}$/,ean128:/^[\000-\177\xC8\xCA-\xCD]*$/,upca:/^\d{1,}$/,upce:/^\d{1,}$/},g=function(t){function e(){return o(this,e),a(this,Object.getPrototypeOf(e).apply(this,arguments))}return n(e,t),h(e,[{key:"_draw",value:function(t){var e=this.model,i=e.left,r=void 0===i?0:i,o=e.top,a=void 0===o?0:o,n=e.width,h=void 0===n?0:n,s=e.height,l=void 0===s?10:s,c=e.alpha,d=void 0===c?1:c,u=this.text;this.prepareIf(u&&(!this.image||this.lastText!=u)),this.lastText=u,t.beginPath(),t.globalAlpha=d;try{this.image&&t.drawImage(this.image,r,a,h,l)}catch(f){console.log(f)}}},{key:"prepare",value:function(t,e){var i=this.text;if(!i)return void t(this);this.image=new Image;var r=this,o=this.image,a=this.model,n=(a.showText,a.scale_h),h=void 0===n?3:n,s=a.scale_w,l=void 0===s?5:s,c=a.square,d=void 0===c?!1:c,u=a.symbol;this.image.onload=function(){r.width_per_scale=o.width/l,d?(r.height_per_scale=o.height/h,r.set({width:o.width,height:o.height})):r.set("width",o.width),t(this)},this.image.onerror=function(t){e(t)};var f=p[u];f instanceof RegExp&&!i.match(f)&&console.error("["+i+"] is not valid for barcode '"+u+"' - \\"+f+"\\.");try{this.image.src=this.imageUrl()}catch(g){console.log(g)}}},{key:"onchange",value:function(t){var e=this;f.every(function(i){return t.hasOwnProperty(i)?(delete e.image,!1):!0})}},{key:"adjustResize",value:function(t,e){if(!this.width_per_scale)return e;var i=!!this.get("square"),r=e.left,o=e.width,a=i?e.top:t.top,n=i?e.height:t.height,h=this.get("scale_w"),s=Math.max(Math.floor(t.width/this.width_per_scale),1);if(i){var l=this.get("scale_h"),c=Math.max(Math.floor(t.height/this.height_per_scale),1),d=Math.abs(e.width-t.width)>Math.abs(e.height-t.height)?s:c;Math.abs(t.top-a)>=10&&(a-=d*this.height_per_scale-e.height),Math.abs(t.left-r)>=10&&(r-=d*this.width_per_scale-e.width),o+=d*this.width_per_scale-e.width,n+=d*this.height_per_scale-e.height,(h!==d||l!==d)&&(this.set({scale_w:d,scale_h:d}),delete this.image)}else Math.abs(t.left-r)>=10&&(r-=s*this.width_per_scale-e.width),o+=s*this.width_per_scale-e.width,h!==s&&(this.set("scale_w",s),delete this.image);return{left:r,top:a,width:o,height:n}}},{key:"drawText",value:function(){}},{key:"imageUrl",value:function(){for(var t=this.model,e=t.symbol,i=t.text,r=t.alttext,o=t.scale_h,a=t.scale_w,n=t.rot,h=symdesc[e].opts,s=h.split(" "),c={},d=0;d<s.length;d++)if(s[d]){var u=s[d].indexOf("=");-1==u?c[s[d]]=!0:c[s[d].substr(0,u)]=s[d].substr(u+1)}r&&(c.alttext=r,c.includetext=!0);var f=new BWIPJS(Module,1);c.backgroundcolor?(f.bitmap(new l["default"](c.backgroundcolor)),delete c.backgroundcolor):f.bitmap(new l["default"]),f.scale(a,o),f.bitmap().pad(+c.paddingwidth*a||0,+c.paddingheight*o||0),BWIPJS.cvs||(BWIPJS.cvs=document.createElement("canvas"),BWIPJS.cvs.style.display="none",BWIPJS.cvs.height=1,BWIPJS.cvs.width=1,document.body.appendChild(BWIPJS.cvs));try{BWIPP()(f,e,i,c)}catch(p){console.error(p);var g=f.bitmap();return g.error(BWIPJS.cvs,n||"N")}return f.bitmap().show(BWIPJS.cvs,n||"N")}},{key:"controls",get:function(){}}]),e}(u(d));i["default"]=g,d.register("barcode",g),scene.Barcode=g},{"./bitmap":2}],2:[function(t,e,i){"use strict";function r(t){var e=[0,0,0],i=[],r=0,o=0,a=0,n=0,h=0,s=0;this.pad=function(t,e){h=t,s=e},this.color=function(t,i,r){e=[t,i,r]},this.extent=function(t,e,i,h){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),h=Math.floor(h),r>t&&(r=t),o>e&&(o=e),i>a&&(a=i),h>n&&(n=h)},this.set=function(t,h,s){t=Math.floor(t),h=Math.floor(h),i.push([t,h,e,s]),r>t&&(r=t),o>h&&(o=h),t>a&&(a=t),h>n&&(n=h)},this.error=function(t){t.width=64,t.height=64;var e=t.getContext("2d");return e.beginPath(),e.rect(0,0,t.width,t.height),e.moveTo(0,0),e.lineTo(t.width,t.height),e.moveTo(t.width,0),e.lineTo(0,t.height),e.lineWidth=5,e.strokeStyle="#ff0000",e.stroke(),t.toDataURL()},this.show=function(e,l){var c=e instanceof window.HTMLCanvasElement?e:document.getElementById(e);if(0==i.length)return c.width=32,c.height=32,c.getContext("2d").clearRect(0,0,c.width,c.height),void(c.style.visibility="visible");if("R"==l||"L"==l)var d=a-r+1,u=n-o+1;else var u=a-r+1,d=n-o+1;if(c.width=u+2*h,c.height=d+2*s,t&&8==t.length){var f=parseInt(t.substr(0,2),16)/255,p=parseInt(t.substr(2,2),16)/255,g=parseInt(t.substr(4,2),16)/255,v=parseInt(t.substr(6,2),16)/255,w=Math.floor((1-f)*(1-v)*255),b=Math.floor((1-p)*(1-v)*255),m=Math.floor((1-g)*(1-v)*255);t="rgb("+w+","+b+","+m+")"}else t&&(t="#"+t);var _=c.getContext("2d");_.fillStyle=t||"#fff",_.fillRect(0,0,c.width,c.height),_.fillStyle="#000";for(var y=_.getImageData(0,0,c.width,c.height),x=y.data,M=0;M<i.length;M++){var $=i[M][0]-r,g=i[M][1]-o,f=i[M][2],P=i[M][3]/255;if("N"==l)g=d-g-1;else if("I"==l)$=u-$-1;else if(g=u-g,"L"==l){var I=g;g=d-$-1,$=I-1}else{var I=$;$=u-g,g=I}var O=4*(g*y.width+$);x[O+0]=x[O+0]*(1-P)+f[0]*P|0,x[O+1]=x[O+1]*(1-P)+f[1]*P|0,x[O+2]=x[O+2]*(1-P)+f[2]*P|0,x[O+3]=255}return _.putImageData(y,h,s),console.log("data-url",c.toDataURL()),c.toDataURL()}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{}],3:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var o=t("./barcode");Object.defineProperty(i,"Barcode",{enumerable:!0,get:function(){return r(o)["default"]}})},{"./barcode":1}]},{},[3]);