!function e(t,i,a){function r(n,h){if(!i[n]){if(!t[n]){var s="function"==typeof require&&require;if(!h&&s)return s(n,!0);if(o)return o(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return r(i?i:e)},c,c.exports,e,t,i,a)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)r(a[n]);return r}({1:[function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=e("./bitmap"),l=a(s),c=scene,d=c.Component,u=c.RectPath,f=["symbol","text","scale_h","scale_w","rot","showText"],p={code11:/^[0-9\-]*$/,codebar:/^[A-D][0-9\+$:\-\/.]*[A-D]$/,code39:{normal:/^[0-9A-Z\-.$\/\+%\*\s]*$/,extended:/^[\000-\177]*$/},code93:{normal:/^[0-9A-Z\-.$\/\+%\*\s]*$/,extended:/^[\000-\177]*$/},code128:{auto:/^[\000-\177]*$/,A:/^[\000-\137]*$/,B:/^[\040-\177]*$/,C:/^(([0-9]{2})+?)*$/},datamatrix:/^[\x00-\xff]*$/,ean8:/^\d{1,}$/,ean13:/^\d{1,}$/,industrial2of5:/^\d{1,}$/,interleaved2of5:/^\d{1,}$/,isbn:/((978[\--– ])?[0-9][0-9\--– ]{10}[\--– ][0-9xX])|((978)?[0-9]{9}[0-9Xx])/,msi:/^\d{1,}$/,pdf417:{"text-compaction":/^[\011\012\015\040-\177]*$/,"binary-compaction":/^[\x00-\xff]*$/},planet:/^\d{1,}$/,postnet:/^\d{1,}$/,ean128:/^[\000-\177\xC8\xCA-\xCD]*$/,upca:/^\d{1,}$/,upce:/^\d{1,}$/},g=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return n(t,e),h(t,[{key:"_draw",value:function(e){var t=this.model,i=t.left,a=void 0===i?0:i,r=t.top,o=void 0===r?0:r,n=t.width,h=void 0===n?0:n,s=t.height,l=void 0===s?10:s,c=t.alpha,d=void 0===c?1:c,u=this.text;this.prepareIf(u&&(!this.image||this.lastText!=u)),this.lastText=u,e.beginPath(),e.globalAlpha=d;try{this.image&&e.drawImage(this.image,a,o,h,l)}catch(f){console.log(f)}}},{key:"prepare",value:function(e,t){var i=this.text;if(!i)return void e(this);this.image=new Image;var a=this,r=this.image,o=this.model,n=(o.showText,o.scale_h),h=void 0===n?3:n,s=o.scale_w,l=void 0===s?5:s,c=o.square,d=void 0===c?!1:c,u=o.symbol;this.image.onload=function(){a.width_per_scale=r.width/l,d?(a.height_per_scale=r.height/h,a.set({width:r.width,height:r.height})):a.set("width",r.width),e(this)},this.image.onerror=function(e){t(e)};var f=p[u];f instanceof RegExp&&!i.match(f)&&console.error("["+i+"] is not valid for barcode '"+u+"' - \\"+f+"\\.");try{this.image.src=this.imageUrl()}catch(g){console.log(g)}}},{key:"onchange",value:function(e){var t=this;f.every(function(i){return e.hasOwnProperty(i)?(delete t.image,!1):!0})}},{key:"adjustResize",value:function(e,t){if(!this.width_per_scale)return t;var i=!!this.get("square"),a=t.left,r=t.width,o=i?t.top:e.top,n=i?t.height:e.height,h=this.get("scale_w"),s=Math.max(Math.floor(e.width/this.width_per_scale),1);if(i){var l=this.get("scale_h"),c=Math.max(Math.floor(e.height/this.height_per_scale),1),d=Math.abs(t.width-e.width)>Math.abs(t.height-e.height)?s:c;Math.abs(e.top-o)>=10&&(o-=d*this.height_per_scale-t.height),Math.abs(e.left-a)>=10&&(a-=d*this.width_per_scale-t.width),r+=d*this.width_per_scale-t.width,n+=d*this.height_per_scale-t.height,(h!==d||l!==d)&&(this.set({scale_w:d,scale_h:d}),delete this.image)}else Math.abs(e.left-a)>=10&&(a-=s*this.width_per_scale-t.width),r+=s*this.width_per_scale-t.width,h!==s&&(this.set("scale_w",s),delete this.image);return{left:a,top:o,width:r,height:n}}},{key:"drawText",value:function(){}},{key:"imageUrl",value:function(){for(var e=this.model,i=e.symbol,a=e.showText,r=e.scale_w,o=this.text,n=a?"":" ",h=r,s=symdesc[i].opts,c=s.split(" "),d={},u=0;u<c.length;u++)if(c[u]){var f=c[u].indexOf("=");-1==f?d[c[u]]=!0:d[c[u].substr(0,f)]=c[u].substr(f+1)}n&&(d.alttext=n,d.includetext=!0);var p=new BWIPJS(Module,1);d.backgroundcolor?(p.bitmap(new l["default"](d.backgroundcolor)),delete d.backgroundcolor):p.bitmap(new l["default"]),p.scale(r,h),p.bitmap().pad(+d.paddingwidth*r||0,+d.paddingheight*h||0),t.canvas||(t.canvas=document.createElement("canvas"),t.canvas.style.display="none",t.canvas.height=1,t.canvas.width=1,document.body.appendChild(t.canvas));try{BWIPP()(p,i,o,d)}catch(g){console.error(g);var v=p.bitmap();return v.error(t.canvas,"N")}return p.bitmap().show(t.canvas,"N")}},{key:"controls",get:function(){}}]),t}(u(d));i["default"]=g,d.register("barcode",g),scene.Barcode=g},{"./bitmap":2}],2:[function(e,t,i){"use strict";function a(e){var t=[0,0,0],i=[],a=0,r=0,o=0,n=0,h=0,s=0;this.pad=function(e,t){h=e,s=t},this.color=function(e,i,a){t=[e,i,a]},this.extent=function(e,t,i,h){e=Math.floor(e),t=Math.floor(t),i=Math.floor(i),h=Math.floor(h),a>e&&(a=e),r>t&&(r=t),i>o&&(o=i),h>n&&(n=h)},this.set=function(e,h,s){e=Math.floor(e),h=Math.floor(h),i.push([e,h,t,s]),a>e&&(a=e),r>h&&(r=h),e>o&&(o=e),h>n&&(n=h)},this.error=function(e){e.width=64,e.height=64;var t=e.getContext("2d");return t.beginPath(),t.rect(0,0,e.width,e.height),t.moveTo(0,0),t.lineTo(e.width,e.height),t.moveTo(e.width,0),t.lineTo(0,e.height),t.lineWidth=5,t.strokeStyle="#ff0000",t.stroke(),e.toDataURL()},this.show=function(t,l){var c=t instanceof window.HTMLCanvasElement?t:document.getElementById(t);if(0==i.length)return c.width=32,c.height=32,c.getContext("2d").clearRect(0,0,c.width,c.height),void(c.style.visibility="visible");if("R"==l||"L"==l)var d=o-a+1,u=n-r+1;else var u=o-a+1,d=n-r+1;if(c.width=u+2*h,c.height=d+2*s,e&&8==e.length){var f=parseInt(e.substr(0,2),16)/255,p=parseInt(e.substr(2,2),16)/255,g=parseInt(e.substr(4,2),16)/255,v=parseInt(e.substr(6,2),16)/255,w=Math.floor((1-f)*(1-v)*255),b=Math.floor((1-p)*(1-v)*255),m=Math.floor((1-g)*(1-v)*255);e="rgb("+w+","+b+","+m+")"}else e&&(e="#"+e);var _=c.getContext("2d");_.fillStyle=e||"#fff",_.fillRect(0,0,c.width,c.height),_.fillStyle="#000";for(var y=_.getImageData(0,0,c.width,c.height),x=y.data,M=0;M<i.length;M++){var $=i[M][0]-a,g=i[M][1]-r,f=i[M][2],O=i[M][3]/255;if("N"==l)g=d-g-1;else if("I"==l)$=u-$-1;else if(g=u-g,"L"==l){var P=g;g=d-$-1,$=P-1}else{var P=$;$=u-g,g=P}var T=4*(g*y.width+$);x[T+0]=x[T+0]*(1-O)+f[0]*O|0,x[T+1]=x[T+1]*(1-O)+f[1]*O|0,x[T+2]=x[T+2]*(1-O)+f[2]*O|0,x[T+3]=255}return _.putImageData(y,h,s),c.toDataURL()}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{}],3:[function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var r=e("./barcode");Object.defineProperty(i,"Barcode",{enumerable:!0,get:function(){return a(r)["default"]}})},{"./barcode":1}]},{},[3]);